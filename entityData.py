COUNT = 0xFB
NAME = [
    "ARROW",
    "BOOMERANG",
    "BOMB",
    "HOOKSHOT_CHAIN",
    "HOOKSHOT_HIT",
    "LIFTABLE_ROCK",
    "PUSHED_BLOCK",
    "CHEST_WITH_ITEM",
    "MAGIC_POWDER_SPRINKLE",
    "OCTOROCK",
    "OCTOROCK_ROCK",
    "MOBLIN",
    "MOBLIN_ARROW",
    "TEKTITE",
    "LEEVER",
    "ARMOS_STATUE",
    "HIDING_GHINI",
    "GIANT_GHINI",
    "GHINI",
    "BROKEN_HEART_CONTAINER",
    "MOBLIN_SWORD",
    "ANTI_FAIRY",
    "SPARK_COUNTER_CLOCKWISE",
    "SPARK_CLOCKWISE",
    "POLS_VOICE",
    "KEESE",
    "STALFOS_AGGRESSIVE",
    "GEL",
    "MINI_GEL",
    "DISABLED",
    "STALFOS_EVASIVE",
    "GIBDO",
    "HARDHAT_BEETLE",
    "WIZROBE",
    "WIZROBE_PROJECTILE",
    "LIKE_LIKE",
    "IRON_MASK",
    "SMALL_EXPLOSION_ENEMY",
    "SMALL_EXPLOSION_ENEMY_2",
    "SPIKE_TRAP",
    "MIMIC",
    "MINI_MOLDORM",
    "LASER",
    "LASER_BEAM",
    "SPIKED_BEETLE",
    "DROPPABLE_HEART",
    "DROPPABLE_RUPEE",
    "DROPPABLE_FAIRY",
    "KEY_DROP_POINT",
    "SWORD",
    "32",
    "PIECE_OF_POWER",
    "GUARDIAN_ACORN",
    "HEART_PIECE",
    "HEART_CONTAINER",
    "DROPPABLE_ARROWS",
    "DROPPABLE_BOMBS",
    "INSTRUMENT_OF_THE_SIRENS",
    "SLEEPY_TOADSTOOL",
    "DROPPABLE_MAGIC_POWDER",
    "HIDING_SLIME_KEY",
    "DROPPABLE_SECRET_SEASHELL",
    "MARIN",
    "RACOON",
    "WITCH",
    "OWL_EVENT",
    "OWL_STATUE",
    "SEASHELL_MANSION_TREES",
    "YARNA_TALKING_BONES",
    "BOULDERS",
    "MOVING_BLOCK_LEFT_TOP",
    "MOVING_BLOCK_LEFT_BOTTOM",
    "MOVING_BLOCK_BOTTOM_LEFT",
    "MOVING_BLOCK_BOTTOM_RIGHT",
    "COLOR_DUNGEON_BOOK",
    "POT",
    "DISABLED",
    "SHOP_OWNER",
    "4D",
    "TRENDY_GAME_OWNER",
    "BOO_BUDDY",
    "KNIGHT",
    "TRACTOR_DEVICE",
    "TRACTOR_DEVICE_REVERSE",
    "FISHERMAN_FISHING_GAME",
    "BOUNCING_BOMBITE",
    "TIMER_BOMBITE",
    "PAIRODD",
    "PAIRODD_PROJECTILE",
    "MOLDORM",
    "FACADE",
    "SLIME_EYE",
    "GENIE",
    "SLIME_EEL",
    "GHOMA",
    "MASTER_STALFOS",
    "DODONGO_SNAKE",
    "WARP",
    "HOT_HEAD",
    "EVIL_EAGLE",
    "SOUTH_FACE_SHRINE_DOOR",
    "ANGLER_FISH",
    "CRYSTAL_SWITCH",
    "67",
    "68",
    "MOVING_BLOCK_MOVER",
    "RAFT_RAFT_OWNER",
    "TEXT_DEBUGGER",
    "CUCCO",
    "BOW_WOW",
    "BUTTERFLY",
    "DOG",
    "KID_70",
    "KID_71",
    "KID_72",
    "KID_73",
    "PAPAHLS_WIFE",
    "GRANDMA_ULRIRA",
    "MR_WRITE",
    "GRANDPA_ULRIRA",
    "YIP_YIP",
    "MADAM_MEOWMEOW",
    "CROW",
    "CRAZY_TRACY",
    "GIANT_GOPONGA_FLOWER",
    "GOPONGA_FLOWER_PROJECTILE",
    "GOPONGA_FLOWER",
    "TURTLE_ROCK_HEAD",
    "TELEPHONE",
    "ROLLING_BONES",
    "ROLLING_BONES_BAR",
    "DREAM_SHRINE_BED",
    "BIG_FAIRY",
    "MR_WRITES_BIRD",
    "FLOATING_ITEM",
    "DESERT_LANMOLA",
    "ARMOS_KNIGHT",
    "HINOX",
    "TILE_GLINT_SHOWN",
    "TILE_GLINT_HIDDEN",
    "8C",
    "8D",
    "CUE_BALL",
    "MASKED_MIMIC_GORIYA",
    "THREE_OF_A_KIND",
    "ANTI_KIRBY",
    "SMASHER",
    "MAD_BOMBER",
    "KANALET_BOMBABLE_WALL",
    "RICHARD",
    "RICHARD_FROG",
    "97",
    "HORSE_PIECE",
    "WATER_TEKTITE",
    "FLYING_TILES",
    "HIDING_GEL",
    "STAR",
    "LIFTABLE_STATUE",
    "FIREBALL_SHOOTER",
    "GOOMBA",
    "PEAHAT",
    "SNAKE",
    "PIRANHA_PLANT",
    "SIDE_VIEW_PLATFORM_HORIZONTAL",
    "SIDE_VIEW_PLATFORM_VERTICAL",
    "SIDE_VIEW_PLATFORM",
    "SIDE_VIEW_WEIGHTS",
    "SMASHABLE_PILLAR",
    "WRECKING_BALL",
    "BLOOPER",
    "CHEEP_CHEEP_HORIZONTAL",
    "CHEEP_CHEEP_VERTICAL",
    "CHEEP_CHEEP_JUMPING",
    "KIKI_THE_MONKEY",
    "WINGED_OCTOROK",
    "TRADING_ITEM",
    "PINCER",
    "HOLE_FILLER",
    "BEETLE_SPAWNER",
    "HONEYCOMB",
    "TARIN",
    "BEAR",
    "PAPAHL",
    "MERMAID",
    "FISHERMAN_UNDER_BRIDGE",
    "BUZZ_BLOB",
    "BOMBER",
    "BUSH_CRAWLER",
    "GRIM_CREEPER",
    "VIRE",
    "BLAINO",
    "ZOMBIE",
    "MAZE_SIGNPOST",
    "MARIN_AT_THE_SHORE",
    "MARIN_AT_TAL_TAL_HEIGHTS",
    "MAMU_AND_FROGS",
    "WALRUS",
    "URCHIN",
    "SAND_CRAB",
    "MANBO_AND_FISHES",
    "BUNNY_CALLING_MARIN",
    "MUSICAL_NOTE",
    "MAD_BATTER",
    "ZORA",
    "FISH",
    "BANANAS_SCHULE_SALE",
    "MERMAID_STATUE",
    "SEASHELL_MANSION",
    "ANIMAL_D0",
    "ANIMAL_D1",
    "ANIMAL_D2",
    "BUNNY_D3",
    "GHOST",
    "ROOSTER",
    "SIDE_VIEW_POT",
    "THWIMP",
    "THWOMP",
    "THWOMP_RAMMABLE",
    "PODOBOO",
    "GIANT_BUBBLE",
    "FLYING_ROOSTER_EVENTS",
    "BOOK",
    "EGG_SONG_EVENT",
    "SWORD_BEAM",
    "MONKEY",
    "WITCH_RAT",
    "FLAME_SHOOTER",
    "POKEY",
    "MOBLIN_KING",
    "FLOATING_ITEM_2",
    "FINAL_NIGHTMARE",
    "KANALET_CASTLE_GATE_SWITCH",
    "ENDING_OWL_STAIR_CLIMBING",
    "COLOR_SHELL_RED",
    "COLOR_SHELL_GREEN",
    "COLOR_SHELL_BLUE",
    "COLOR_GHOUL_RED",
    "COLOR_GHOUL_GREEN",
    "COLOR_GHOUL_BLUE",
    "ROTOSWITCH_RED",
    "ROTOSWITCH_YELLOW",
    "ROTOSWITCH_BLUE",
    "FLYING_HOPPER_BOMBS",
    "HOPPER",
    "AVALAUNCH",
    "BOUNCING_BOULDER",
    "COLOR_GUARDIAN_BLUE",
    "COLOR_GUARDIAN_RED",
    "GIANT_BUZZ_BLOB",
    "HARDHIT_BEETLE",
    "PHOTOGRAPHER",
]
assert len(NAME) == COUNT

class EntityData:
    def __init__(self, rom):
        groups = rom.banks[0x03][0x01F6:0x01F6+COUNT]
        group_count = max(groups) + 1
        group_health = rom.banks[0x03][0x07BC:0x07BC+group_count]
        group_damage_type = rom.banks[0x03][0x03EC:0x03EC+group_count*16]
        damage_per_damage_type = rom.banks[0x03][0x073C:0x073C+8*16]
        physics_flags = rom.banks[0x03][0x0000:0x0000+COUNT]
        damage_to_link = rom.banks[0x03][0x07F1:0x07F1+group_count]

        for n in range(group_count):
            entities = list(map(lambda data: NAME[data[0]], filter(lambda data: data[1] == n, enumerate(groups))))
            print(hex(n), damage_to_link[n], entities)
            dmg = bytearray()
            for m in range(16):
                dmg.append(damage_per_damage_type[m*8+group_damage_type[n*16+m]])
            import binascii
            #print(binascii.hexlify(group_damage_type[n*16:n*16+16]))
            print(binascii.hexlify(dmg))


if __name__ == "__main__":
    from rom import ROM
    import sys
    rom = ROM(sys.argv[1])
    EntityData(rom)
